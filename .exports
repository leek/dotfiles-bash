#!/bin/bash

# Our own bin dir at the highest priority, followed by /usr/local/bin
export PATH="/usr/local/bin:/usr/local/sbin:$PATH"

# Regular
export BLACK='\033[0;30m'
export RED='\033[0;31m'
export GREEN='\033[0;32m'
export YELLOW='\033[0;33m'
export BLUE='\033[0;34m'
export PURPLE='\033[0;35m'
export CYAN='\033[0;36m'
export WHITE='\033[0;37m'

# Bold
export LIGHT_BLACK='\033[1;30m'
export LIGHT_RED='\033[1;31m'
export LIGHT_GREEN='\033[1;32m'
export LIGHT_YELLOW='\033[1;33m'
export LIGHT_BLUE='\033[1;34m'
export LIGHT_PURPLE='\033[1;35m'
export LIGHT_CYAN='\033[1;36m'
export LIGHT_WHITE='\033[1;37m'

# Background
export ON_BLACK='\033[0;40m'
export ON_RED='\033[0;41m'
export ON_GREEN='\033[0;42m'
export ON_YELLOW='\033[0;43m'
export ON_BLUE='\033[0;44m'
export ON_PURPLE='\033[0;45m'
export ON_CYAN='\033[0;46m'
export ON_WHITE='\033[0;47m'
export NO_COLOUR='\033[0m'

# Colors
export CLICOLOR=1
if [[ -x "`which gdircolors`" ]] || [[ -x "`which dircolors`" ]]; then
  export LS_COLORS='no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.pcx=01;35:*.yuv=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.flac=01;35:*.mp3=01;35:*.mpc=00;36:*.ogg=00;36:*.wav=00;36:*.mid=00;36:*.midi=00;36:*.au=00;36:*.flac=00;36:*.aac=00;36:*.ra=01;36:*.mka=01;36:';
else
  export LSCOLORS=gxfxcxdxbxegedabagacad
fi

# Editor defaults
export EDITOR='nano'
if [[ -x "`which subl`" ]]; then
    export EDITOR='subl -w'
    export LESSEDIT='subl %f:%1m'
elif [[ -x "`which mate`" ]]; then
    export LESSEDIT='mate -l %lm %f'
fi

export FIGNORE="CVS:.DS_Store:.svn"
export PAGER='less -SFX'
export MAKEFLAGS='-j 3'

# Prefer US English and use UTF-8
export LC_ALL="en_US.UTF-8"
export LANG="en_US"
export LC_CTYPE="en_US.UTF-8"

# History Tracking
export HISTSIZE=32768
export HISTFILESIZE=$HISTSIZE
export HISTCONTROL=ignoreboth

# Make some commands not show up in history
export HISTIGNORE="ls:ls *:cd:cd -:pwd;exit:date:* --help"
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S  "

# Add global node_modules to PATH if available
if [ -d /usr/local/lib/node_modules ]; then
    export NODE_PATH="/usr/local/lib/node_modules"
fi

if which brew > /dev/null; then
    BREW_PREFIX=`brew --prefix`
    # Load Homebrew's shell completion
    if [ -f "$BREW_PREFIX/etc/bash_completion" ]; then
        . "$BREW_PREFIX/etc/bash_completion"
    fi
    # Load GRC
    if [ -f "$BREW_PREFIX/etc/grc.bashrc" ]; then
        . "$BREW_PREFIX/etc/grc.bashrc"
    fi
    # homebrew-php
    PHP_BREW_PREFIX=`brew --prefix php53`
    if [ -d "$PHP_BREW_PREFIX/bin" ]; then
        export PATH="$PHP_BREW_PREFIX/bin:$PATH"
    fi
    # Set custom temp directory
    export HOMEBREW_TEMP=/usr/local/tmp
fi

# For permissions on OSX
if [[ "$OSTYPE" =~ ^darwin ]]; then
    export GEM_HOME="$HOME/.gem"
    export GEM_PATH="$HOME/.gem"
    export RUBYOPT=rubygems
fi

if [[ -z "$SHORT_USER" ]]; then
    export SHORT_USER="$USER"
fi

# user@hostname: /path (git) $
export PS1="$GREEN$SHORT_USER@\\h$LIGHT_GREY: $BLUE\\w $RED"'$(__git_ps1 "(%s) ")'"$PURPLE\\$ $NO_COLOUR"
